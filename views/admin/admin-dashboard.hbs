<section class="vh-130 pt-2 mt-3" style="background-color: rgba(238, 238, 238, 0.845);">
  <div class="container h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-12 col-xl-11">
        <div class="card text-black mt-4 mb-4" style="border-radius: 25px;">
          <div class="card-body p-md-5">
            <div class="row justify-content-center">

              <div class="row justify-content-center text-center mb-2">
                <h2 class="logo">ADMIN DASHBOARD</h2>
              </div>
              <!--Section: Statistics with subtitles-->
              <section>
                <div class="row">
                  <div class="col-xl-6 col-md-12 mb-4"><a style="color: black; text-decoration: none;"
                      href="#complaints">
                      <div class="card">
                        <div class="card-body">
                          <div class="d-flex justify-content-between p-md-1">
                            <div class="d-flex flex-row">
                              <div class="align-self-center">
                                <i class="fas fa-pencil-alt text-info fa-3x me-4"></i>
                              </div>
                              <div>
                                <h4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="25" fill="currentColor"
                                    class="bi bi-envelope-paper-fill" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd"
                                      d="M6.5 9.5 3 7.5v-6A1.5 1.5 0 0 1 4.5 0h7A1.5 1.5 0 0 1 13 1.5v6l-3.5 2L8 8.75l-1.5.75ZM1.059 3.635 2 3.133v3.753L0 5.713V5.4a2 2 0 0 1 1.059-1.765ZM16 5.713l-2 1.173V3.133l.941.502A2 2 0 0 1 16 5.4v.313Zm0 1.16-5.693 3.337L16 13.372v-6.5Zm-8 3.199 7.941 4.412A2 2 0 0 1 14 16H2a2 2 0 0 1-1.941-1.516L8 10.072Zm-8 3.3 5.693-3.162L0 6.873v6.5Z" />
                                  </svg> Total Complaints</h4>

                              </div>
                            </div>
                            <div class="align-self-center">
                              <h2 class="h1 mb-0 text-success">({{countComp}})</h2>
                            </div>
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>
                  <div class="col-xl-6 col-md-12 mb-4"><a style="color: black; text-decoration: none;" href="">
                      <div class="card">
                        <div class="card-body">
                          <div class="d-flex justify-content-between p-md-1">
                            <div class="d-flex flex-row">
                              <div class="align-self-center">
                                <i class="far fa-comment-alt text-warning fa-3x me-4"></i>
                              </div>
                              <div>
                                <h4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="25" fill="currentColor"
                                    class="bi bi-chat-square-dots-fill" viewBox="0 0 16 16">
                                    <path
                                      d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.5a1 1 0 0 0-.8.4l-1.9 2.533a1 1 0 0 1-1.6 0L5.3 12.4a1 1 0 0 0-.8-.4H2a2 2 0 0 1-2-2V2zm5 4a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                                  </svg> Messages</h4>
                                <p class="mb-0"></p>
                              </div>
                            </div>
                            <div class="align-self-center">
                              <h2 class="h1 mb-0">{{messages}}</h2>
                            </div>
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>
                </div>
                <div class="row">
                  <div class="col-xl-6 col-md-12 mb-4"><a style="color: black; text-decoration: none;" href="">
                      <div class="card">
                        <div class="card-body">
                          <div class="d-flex justify-content-between p-md-1">
                            <div class="d-flex flex-row">
                              <div class="align-self-center">
                                <i class="fas fa-pencil-alt text-info fa-3x me-4"></i>
                              </div>
                              <div>
                                <h4><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                                    class="bi bi-microsoft-teams" viewBox="0 0 16 16">
                                    <path
                                      d="M9.186 4.797a2.42 2.42 0 1 0-2.86-2.448h1.178c.929 0 1.682.753 1.682 1.682v.766Zm-4.295 7.738h2.613c.929 0 1.682-.753 1.682-1.682V5.58h2.783a.7.7 0 0 1 .682.716v4.294a4.197 4.197 0 0 1-4.093 4.293c-1.618-.04-3-.99-3.667-2.35Zm10.737-9.372a1.674 1.674 0 1 1-3.349 0 1.674 1.674 0 0 1 3.349 0Zm-2.238 9.488c-.04 0-.08 0-.12-.002a5.19 5.19 0 0 0 .381-2.07V6.306a1.692 1.692 0 0 0-.15-.725h1.792c.39 0 .707.317.707.707v3.765a2.598 2.598 0 0 1-2.598 2.598h-.013Z" />
                                    <path
                                      d="M.682 3.349h6.822c.377 0 .682.305.682.682v6.822a.682.682 0 0 1-.682.682H.682A.682.682 0 0 1 0 10.853V4.03c0-.377.305-.682.682-.682Zm5.206 2.596v-.72h-3.59v.72h1.357V9.66h.87V5.945h1.363Z" />
                                  </svg> Total Engineers</h4>

                              </div>
                            </div>
                            <div class="align-self-center">
                              <h2 class="h1 mb-0 text-success">({{countEng}})</h2>
                            </div>
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>
                  <div class="col-xl-6 col-md-12 mb-4 ">
                    <a style="color: black; text-decoration: none;" href="#engineer">
                      <div class="card">
                        <div class="card-body">
                          <div class="d-flex justify-content-between p-md-1">
                            <div class="d-flex flex-row">
                              <div class="align-self-center">
                                <i class="far fa-comment-alt text-warning fa-3x me-4"></i>
                              </div>
                              <div>
                                <h4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="25" fill="currentColor"
                                    class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
                                    <path
                                      d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z" />
                                  </svg> Create Engineer</h4>
                                <p class="mb-0"></p>
                              </div>
                            </div>
                            <div class="align-self-center">
                              <h2 class="h1 mb-0">{{Engineer}}</h2>
                            </div>
                          </div>
                        </div>
                      </div>
                  </div>
                  </a>
                </div>
              </section>

            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!--complaints section-->
<section class="vh-130 pt-2 mt-3" style="background-color: rgba(238, 238, 238, 0.845);" id="complaints">
  <div class="container h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-12 col-xl-11">
        <div class="card text-black mt-4 mb-4" style="border-radius: 25px;">
          <div class="card-body p-md-5">
            <div class="row justify-content-center">

              <div class="row justify-content-center text-center mb-2">
                <h2 class="logo">New Complaints</h2>
              </div>

              <table class="table" border="2">
                <thead>
                  <tr>
                    <th scope="col">Subject</th>
                    <th scope="col">Engineers</th>

                    <th scope="col">Status</th>

                  </tr>
                </thead>
                <tbody>
                  
                  {{#each joint}}
                  <tr>
                    <td>{{this.complaints.subject}}</td>

                    <td>
                      <form action="/admin/send?id={{this.complaints._id}}" method="post">

                        <select name="engineer" class="form-select  mb-3" style="width: 10rem;">
                          {{#each engineers}}
                          <option>{{this.name}}</option>
                          {{/each}}
                          

                        </select>
                        <button type="submit" class="btn btn-primary">Send</button>
                      </form>
                    </td>
                    <td>
                      {{#if this.complaints.engineer}}
                      <p class="text-success">Assigned</p>
                      {{/if}}
                    </td>

                  </tr>
                  {{/each}}
                 
                </tbody>
              </table>


            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!--engineer section-->

<section class="vh-130 pt-2" style="background-color: rgba(238, 238, 238, 0.845);" id="engineer">
  <div class=" container h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-12 col-xl-11">
        <div class="card text-black mt-4 mb-4" style="border-radius: 25px;">
          <div class="card-body p-md-5">
            <div class="row justify-content-center">

              <div class="row justify-content-center text-center mb-2">
                <h2 class="logo">Create Engineer</h2>
              </div>
              <div class="card " style="width:40rem; height:30rem;">

                <div class="mt-3 justify-content-center">
                  <form action="/admin/create" method="post">
                    <div class="form-outline mb-4">
                      <input type="text" id="form2Example1" class="form-control" name="name" />
                      <label class="form-label" for="form2Example1">Name</label>
                    </div>
                    <!-- Email input -->
                    <div class="form-outline mb-4">
                      <input type="email" name="email" id="form2Example1" class="form-control" />
                      <label class="form-label" for="form2Example1">Email address</label>
                    </div>

                    <!-- Password input -->
                    <div class="form-outline mb-4">
                      <input type="password" name="password" id="form2Example2" class="form-control" />
                      <label class="form-label" for="form2Example2">Password</label>
                    </div>



                    <!-- Submit button -->
                    <button type="submit" class="btn btn-warning btn-block mb-4">Create</button>


                  </form>
                </div>
              </div>

            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="vh-130 pt-2" style="background-color: rgba(238, 238, 238, 0.845);" id="engineer">
  <div class=" container h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-12 col-xl-11">
        <div class="card text-black mt-4 mb-4" style="border-radius: 25px;">
          <div class="card-body p-md-5">
            <div class="row justify-content-center">

              <div class="row justify-content-center text-center mb-2">
                <h2 class="logo">Engineers</h2>
              </div>
              <div class="card " style="width:40rem; height:30rem;">

                <div class="mt-3 justify-content-center">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th></th>
                      
                      </tr>
                    </thead>
                    <tbody>
                      {{#each joint}}
                      {{#each engineers}}
                      <tr>
                        <td>
                          {{this.name}}
                        </td>
                        <td>
                          {{this.email}}
                        </td>
                        <td>
                          <a href="/admin/delete-eng?id={{this._id}}" class="btn btn-danger" 
                          onClick="return confirm('Are you sure you want to delete {{this.name}}')">Delete</a>
                        </td>
                      </tr>
                      {{/each}}
                      {{/each}}
                    </tbody>
                  </table>
                </div>
              </div>

            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>